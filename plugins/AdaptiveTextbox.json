{
    "name": "自适应文本框",
    "version": "1.0.0",
    "author": "RSPqfgn",
    "description": "使文本框能根据内容自动调整大小",
    "enabled": true,
    "init": "function() {\n    // 自适应文本框功能\n    // 创建测量元素\n    const measurer = document.createElement('span');\n    Object.assign(measurer.style, {\n        position: 'absolute',\n        visibility: 'hidden',\n        whiteSpace: 'pre',\n        height: 'auto',\n        width: 'auto'\n    });\n\n    // 通用调整函数\n    function autoAdjust(element) {\n        if (element.tagName === 'TEXTAREA') {\n            element.style.height = 'auto';\n            element.style.height = element.scrollHeight + 'px';\n        } else if (element.tagName === 'INPUT' && element.type === 'text') {\n            const style = window.getComputedStyle(element);\n            measurer.style.font = style.font;\n            measurer.style.padding = style.padding;\n            measurer.textContent = element.value || element.placeholder;\n            \n            document.body.appendChild(measurer);\n            const minWidth = parseInt(style.minWidth) || 100;\n            const newWidth = Math.max(minWidth, measurer.offsetWidth + 20);\n            document.body.removeChild(measurer);\n            \n            element.style.width = newWidth + 'px';\n            element.style.transition = 'width 0.2s ease';\n        }\n    }\n\n    // 事件处理函数\n    function handleInput(e) {\n        autoAdjust(e.target);\n    }\n\n    // 初始化现有文本框\n    function initTextboxes() {\n        document.querySelectorAll('input[type=\"text\"], textarea').forEach(element => {\n            autoAdjust(element);\n            element.addEventListener('input', handleInput);\n        });\n    }\n\n    // 使用MutationObserver监听动态加载的文本框\n    const observer = new MutationObserver(mutations => {\n        mutations.forEach(mutation => {\n            mutation.addedNodes.forEach(node => {\n                if (node.nodeType === 1) {\n                    const textboxes = node.querySelectorAll?.('input[type=\"text\"], textarea') || [];\n                    textboxes.forEach(element => {\n                        if (!element.dataset.adaptiveInit) {\n                            autoAdjust(element);\n                            element.addEventListener('input', handleInput);\n                            element.dataset.adaptiveInit = 'true';\n                        }\n                    });\n                }\n            });\n        });\n    });\n\n    // 开始观察DOM变化\n    observer.observe(document.body, {\n        childList: true,\n        subtree: true\n    });\n\n    // 初始执行\n    initTextboxes();\n    \n    // 添加重置监听\n    window.addEventListener('resize', () => {\n        document.querySelectorAll('input[type=\"text\"], textarea').forEach(autoAdjust);\n    });\n}"
}